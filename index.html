<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>내신 5등급제 계산기</title>
<style>
  :root{--bg:#f7f7f8;--ink:#111;--muted:#666;--border:#e5e7eb;--bar:#2b2b2b;--row:#fafafa;--btn:#2d6cdf}
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .top{background:var(--bar);color:#fff;padding:10px 18px;font-weight:700}
  .wrap{max-width:820px;margin:0 auto;padding:18px}
  .panel{background:#fff;border:1px solid var(--border);border-radius:8px;padding:10px;margin:12px 0}
  .row{display:flex;gap:8px}
  input[type="number"]{flex:1;border:1px solid var(--border);border-radius:6px;padding:8px 10px}
  button{width:180px;border:0;border-radius:6px;padding:8px 10px;background:var(--btn);color:#fff;font-weight:800;cursor:pointer}
  button:active{opacity:.9}
  .tbl{overflow:auto;border:1px solid var(--border);border-radius:8px;background:#fff}
  table{width:100%;border-collapse:collapse}
  thead th{background:#333;color:#fff;text-align:left;padding:8px}
  tbody td{border-top:1px solid var(--border);padding:8px}
  tbody tr:nth-child(odd){background:var(--row)}
  .muted{color:var(--muted)}
  .hint{margin-top:6px}
  .foot{margin-top:8px}
</style>
</head>
<body>
  <div class="top">내신 5등급제 계산기</div>

  <div class="wrap">
    <div class="panel">
      <div class="muted" style="margin-bottom:6px">인원수를 입력하세요</div>
      <div class="row">
        <input id="total" type="number" min="1" value="100" onkeydown="if(event.key==='Enter'){compute();}">
        <button type="button" onclick="compute()">계산하기</button>
      </div>
      <p class="muted hint">
        기준 비율: 1등급 10% · 2등급 24% · 3등급 32% · 4등급 24% · 5등급 10% (반올림, 총합 보정)
      </p>
    </div>

    <div class="tbl">
      <table aria-label="학급 등급표">
        <thead>
          <tr><th>등급</th><th>비율</th><th>인원</th><th>등수</th></tr>
        </thead>
        <tbody id="rows"></tbody>
      </table>
    </div>

    <p class="muted foot">참고용 계산기입니다. 학교 지침과 다를 수 있습니다.</p>
  </div>

<script>
  // 5등급제 비율
  var PERCENTS = [10, 24, 32, 24, 10];
  var LABELS   = ["1등급","2등급","3등급","4등급","5등급"];

  function allocateCounts(total, percents){
    if (!total || total < 1) return percents.map(function(){return 0;});
    var raw = percents.map(function(p){ return total * p / 100; });
    var counts = raw.map(function(x){ return Math.round(x); });

    // 총합 보정(최대잔여)
    var sum = 0; for(var i=0;i<counts.length;i++) sum+=counts[i];
    var delta = total - sum; // >0: +1, <0: -1
    var order = raw.map(function(x,i){ return {i:i, frac:Math.abs(x - Math.round(x))}; })
                   .sort(function(a,b){ return b.frac - a.frac; });

    while (delta !== 0) {
      if (delta > 0) {
        for (var u=0; u<order.length && delta>0; u++){ counts[order[u].i]++; delta--; }
      } else {
        for (var d=order.length-1; d>=0 && delta<0; d--){
          var idx = order[d].i;
          if (counts[idx] > 0){ counts[idx]--; delta++; }
        }
      }
    }
    return counts;
  }

  function cumulative(arr){ var out=[], s=0; for(var i=0;i<arr.length;i++){ s+=arr[i]; out.push(s);} return out; }

  function compute(){
    var total = Math.max(1, Number(document.getElementById('total').value) || 0);
    var rowsEl = document.getElementById('rows');
    // 계산
    var counts = allocateCounts(total, PERCENTS);
    var cum = cumulative(counts);
    // 렌더
    rowsEl.innerHTML = '';
    for (var i=0;i<counts.length;i++){
      var c = counts[i];
      var start = (i===0) ? 1 : (cum[i-1] + 1);
      var end = cum[i];
      var tr  = document.createElement('tr');
      function td(txt){ var e=document.createElement('td'); e.textContent=txt; return e; }
      tr.appendChild(td(LABELS[i]));
      tr.appendChild(td(PERCENTS[i] + '%'));
      tr.appendChild(td(c));
      tr.appendChild(td(c>0 ? (start + ' ~ ' + end + ' 등수까지') : '-'));
      rowsEl.appendChild(tr);
    }
  }

  // 초기 렌더
  compute();
</script>
</body>
</html>
